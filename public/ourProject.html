<!DOCTYPE html>
<html lang="1.1">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Can of Mysteries</title>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1049749345591002"
        crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
        <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-analytics.js"></script>
        <meta name="google-signin-scope" content="profile email">
        <meta name="google-signin-client_id" content="188291999968-v7rdgm2p73bkdqis7h8a5209na92gsbh.apps.googleusercontent.com">
        <script src="https://apis.google.com/js/platform.js" async defer></script>
        <style>
            @media(min-width: 900px){
                .body-wrapper{
                    grid-template:  
                        "account search search search" 
                        "account left slider right"
                        "account left center  right"
                        "footer footer footer footer";
                    grid-template-rows: 0px 150px auto auto ;
                    grid-template-columns: 150fr 300px auto 250px;
                }
            }
            .header-container{
                grid-area: center;
            }
        </style>
    </head>
    <body>
        <div class = "main-wrapper">
            <div class = "upload-container">
                <div class = "upload-form-wrapper">
                    <h1>Article Upload</h1>
                    <i class="fa fa-close" style="font-size:24px"></i>
                    <textarea id="htmeditor"></textarea> <script src="https://htmeditor.com/js/htmeditor.min.js"      htmeditor_textarea="htmeditor"      full_screen="no"      editor_height="480"     run_local="no"> </script> 
                    <form>
                        <div class = "form-row">
                        <div class="form-group col-md-6">
                            <label for="inputFirstName">Author First Name</label>
                            <input type="text" class="form-control" id="inputFirstName" placeholder="First name">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputLastName">Author Last Name</label>
                            <input type="text" class="form-control" id="inputLastName" placeholder="Last name">
                        </div>
                        </div>
                        <div class="form-group col-md-12">
                            <label for="inputtitle">Article title</label>
                            <input type="text" class="form-control" id="inputtitle" placeholder="title" required="true">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="descriptionTextArea">Example textarea</label>
                            <textarea class="form-control" id="descriptionTextArea" rows="5" required="true"></textarea>
                        </div>
                        <div class = "form-row">
                            <div class="form-group col-md-6">
                            <label for="inputTag1">Tags - Seperate each tag by 1 comma with no spaces</label>
                            <input type="text" class="form-control" id="inputTag1" placeholder="Tag" required="true">
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputCanItem">Can Item</label>
                            <input type="text" class="form-control" id="inputCanItem" placeholder="Can Item" required="true">
                        </div>
                        <div class="form-group col-md-12">
                            <label for="inputCoverImage">Cover Image Link</label>
                            <input type="text" class="form-control" id="inputCoverImage" placeholder="URL" required="true">
                        </div>
                        <button type="submit" class="btn btn-primary" id="articleSubmitBtn">Submit</button>
                    </form>            
                </div>
            </div>
            <div class = "navbar-wrapper">
                <div id = "navbar-top"> 
                    <nav class="navbar navbar-expand-custom navbar-mainbg">
                        <button class="navbar-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fas fa-bars text-white"></i>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav ml-auto">
                                <li class="nav-item">
                                    <a class="nav-link" href="index.html">Home</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="ourProject.html">Our Project</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="theAssignment.html">The Assignment</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="javascript:void(0);">The Can and its Mysteries contents</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="theCanAndItsContents.html">Using our work as a Resource (Citations)</a>
                                </li>
                            </ul>
                            <svg class="ham ham6" viewBox="0 0 100 100" width="80" onclick="this.classList.toggle('active');">
                                <path
                                    class="line top"
                                    d="m 30,33 h 40 c 13.100415,0 14.380204,31.80258 6.899646,33.421777 -24.612039,5.327373 9.016154,-52.337577 -12.75751,-30.563913 l -28.284272,28.284272" />
                                <path
                                    class="line middle"
                                    d="m 70,50 c 0,0 -32.213436,0 -40,0 -7.786564,0 -6.428571,-4.640244 -6.428571,-8.571429 0,-5.895471 6.073743,-11.783399 12.286435,-5.570707 6.212692,6.212692 28.284272,28.284272 28.284272,28.284272" />
                                <path
                                    class="line bottom"
                                    d="m 69.575405,67.073826 h -40 c -13.100415,0 -14.380204,-31.80258 -6.899646,-33.421777 24.612039,-5.327373 -9.016154,52.337577 12.75751,30.563913 l 28.284272,-28.284272" />
                            </svg>
                        </div>
                    </nav>
                    <div class = "nav-account">
                        <div id = "nav-user-container">
                            <div id = "user-icon">
                            </div>
                        </div>
                        <div id = "nav-settings-container">
                            <a href="">
                            <i id="acnt-icon" class="glyphicon glyphicon-user"></i>
                            </a>
                        </div>
                        <div id = "nav-admin-container">
                            <a>
                            <i id="inbox-icon" class="glyphicon glyphicon-inbox"></i>
                            </a>
                        </div>
                        <div id = "nav-upload-container">
                            <a href="">
                            <i id="Upload-icon" class="glyphicon glyphicon-upload"></i>
                            </a>
                        </div>
                    </div>
                    <div id="nav-account-info" aria-width="300" aria-height="400">
  
                    </div>
                </div>
                <div id = "search-br" class="no-stick">
                    <form class="d-flex input-group srch">
                        <input type="search" class="form-control" placeholder="Search" aria-label="Search" aria-describedby="search-addon" />
                        <span class="input-group-text" id="search-addon">
                            <span style="color: rgb(131, 127, 127)" class="glyphicon glyphicon-search icon-search"></span>
                        </span> 
                    </form>
                    <div class="google g-signin2" data-onsuccess="onSignIn" data-width="200" data-height="35"  data-theme="dark" style="position: relative; float: right; margin-right: 50px; margin-top: -75px; float: right;"></div>
                </div>  
            </div>
            <div class = "body-wrapper" id="home-body-wrapper">
                <div class="header-container">
                    <div id="header">
                        <h1 id = "header-title">Our Project</h1>
                        <p>We sometimes forget, in our day to day lives, that the world is a very unusual place, and the people in it are sometimes even more unusual. 

                            Our project, as part of our Freshman Composition course at the University of South Carolina Aiken, is to research a mysterious, unusual or "weird" place, story, legend, creature, person, or superstition and introduce that "weird topic" to you, our readers.
                            
                            We are sharing our research with you in order to not only spread knowledge about these "weird topics," but also to remind everyone that there are still mysteries left to be enjoyed in the world.</p>
                    </div>
                </div>
                <div id = "grid-text-box">
                    <span id = "text-descrip-grid">

                    </span>
                </div>
                <div class = "archives">
                    <h1 id = "widget-header">Archives</h1>
                    <br>
                    <ul>
                        <li>test</li>
                    </ul>
                </div>
                <div class = "suggestions">
                    <h1 id = "widget-header">Most Liked</h1>
                    <div class="suggestion-likes" id ="suggestion-likes:0" onClick="reply_click(this.id)">
                        <a >
                            <img class = "animated-background-img" id="suggestion-likes-image" src="" />
                            <span class = "animated-background" id="suggestion-likes-title"></span>
                            <br>
                            <span class = "animated-background"  id="suggestion-likes-author"></span>
                            <br>
                            <span class = "animated-background"  id="suggestion-likes-date"></span>
                            <br>
                            <span class = "animated-background" id="suggestion-likes-description"></span>
                        </a>
                    </div>
                </div>
                <div class = "footer-wrapper">
                    <div id = "ftr-left">
                    </div >
                    <div id = "ftr-center">
                        <div id = "cntr-ftr-title">
                        <h1> About Us</h1>
                        </div>
                        <div id = "cntr-ftr-content">
                            The world is a mysterious place. The can of mystery highlights some of those mysteries. This site is a class project for Amanda Warren's English 101 class at the University of South Carolina Aiken. Articles are uploaded once a year (on average) in the fall and/or spring. If you have questions or tips on mysteries, please leave a comment or contact AmandaW at USCA dot EDU.
                        </div>
                    </div>
                    <div id = "ftr-right">
                    </div>
                </div>
            </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.0.5/gsap.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TimelineLite.min.js"></script>
        <script src="js/script.js"></script>
        <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCFUz4czbiLnuA7M7TBVX-iECvKutd8emY",
            authDomain: "main-blog-17ac9.firebaseapp.com",
            projectId: "main-blog-17ac9",
            storageBucket: "main-blog-17ac9.appspot.com",
            messagingSenderId: "188291999968",
            appId: "1:188291999968:web:0a0a6547af55693f270885",
            measurementId: "G-N1ZFZZ7BQT"
        };
        firebase.initializeApp(firebaseConfig);

        let blogPosts = [];

        firebase.firestore().collection('blog-posts').orderBy("likes").get().then((snapshot) => { 

            snapshot.docs.forEach(doc => {
                blogPosts .push({ ...doc.data() });
            })

            for(let i = 0; i < blogPosts .length; i++){
                let sugesttions = document.getElementsByClassName('suggestions');
                let div = document.getElementsByClassName('suggestion-likes');
                let clone = div[0].cloneNode(true);
                if(i == 0){
                    document.querySelector("span#suggestion-likes-author").textContent = blogPosts[blogPosts.length-1].author;
                    $("#suggestion-likes-author").removeClass("animated-background")
                    document.querySelector("span#suggestion-likes-date").textContent = blogPosts[blogPosts.length-1].postDate;
                    $("#suggestion-likes-date").removeClass("animated-background")
                    document.querySelector("span#suggestion-likes-title").textContent = blogPosts[blogPosts.length-1].title;
                    $("#suggestion-likes-title").removeClass("animated-background")
                    document.querySelector("span#suggestion-likes-description").textContent = blogPosts[blogPosts.length - i-1].description.slice(0, 100)+".....";
                    $("#suggestion-likes-description").removeClass("animated-background")
                    document.querySelector("img#suggestion-likes-image").src = blogPosts[blogPosts.length-1].coverImage;
                    $("#suggestion-likes-image").removeClass("animated-background-img")
                    var tags = (blogPosts[blogPosts.length-1].tag1).split(",");
                    document.getElementById('suggestion-likes:0').style.height = "min-content";

                }else if(i == 1){
                    cloneId = "suggestion-likes:" + i;
                    clone.id = cloneId;

                    clone.querySelector("span#suggestion-likes-author").textContent = blogPosts[blogPosts.length - i-1].author;
                    clone.querySelector("span#suggestion-likes-date").textContent = blogPosts[blogPosts.length - i-1].postDate;
                    clone.querySelector("span#suggestion-likes-title").textContent = blogPosts[blogPosts.length - i-1].title;
                    clone.querySelector("span#suggestion-likes-description").textContent = blogPosts[blogPosts.length - i-1].description.slice(0, 100)+".....";
                    clone.querySelector("img#suggestion-likes-image").src = blogPosts[blogPosts.length - i-1].coverImage;

                    sugesttions[0].appendChild(clone);
                    document.getElementById(cloneId).style.height = "min-content";
                }
                else if(i == 2){
                    cloneId = "suggestion-likes:" + i;
                    clone.id = cloneId;

                    clone.querySelector("span#suggestion-likes-author").textContent = blogPosts[blogPosts.length - i-1].author;
                    clone.querySelector("span#suggestion-likes-date").textContent = blogPosts[blogPosts.length - i-1].postDate;
                    clone.querySelector("span#suggestion-likes-title").textContent = blogPosts[blogPosts.length - i-1].title;
                    clone.querySelector("span#suggestion-likes-description").textContent = blogPosts[blogPosts.length - i-1].description.slice(0, 100)+".....";
                    clone.querySelector("img#suggestion-likes-image").src = blogPosts[blogPosts.length - i-1].coverImage;

                    sugesttions[0].appendChild(clone);
                    document.getElementById(cloneId).style.height = "min-content";
                }
            }

            });
            
        firebase.firestore().collection('blog-posts').orderBy("views").get().then((snapshot) => { 
            $(".suggestions").append("<h1 id='widget-header'>Popular</h1><div class='suggestion-clicks' id ='suggestion-clicks:0' onClick='reply_click(this.id)'><a ><img id='suggestion-clicks-image' src='https://picsum.photos/190/190?11' /><span id='suggestion-clicks-title'>This is an Example Title</span><br><span id='suggestion-clicks-author'>Austin Walter</span><br><span id='suggestion-clicks-date'>01.16.2022</span><br><span id='suggestion-clicks-description'>Example</span></a></div>")
        
            snapshot.docs.forEach(doc => {
                blogPosts .push({ ...doc.data() });
            })

            for(let i = 0; i < blogPosts .length; i++){
                let sugesttions = document.getElementsByClassName('suggestions');
                let div = document.getElementsByClassName('suggestion-clicks');
                let clone = div[0].cloneNode(true);
                if(i == 0){
                    document.querySelector("span#suggestion-clicks-author").textContent = blogPosts[blogPosts.length-1].author;
                    document.querySelector("span#suggestion-clicks-date").textContent = blogPosts[blogPosts.length-1].postDate;
                    document.querySelector("span#suggestion-clicks-title").textContent = blogPosts[blogPosts.length-1].title;
                    document.querySelector("span#suggestion-clicks-description").textContent = blogPosts[blogPosts.length - i-1].description.slice(0, 100)+".....";
                    document.querySelector("img#suggestion-clicks-image").src = blogPosts[blogPosts.length-1].coverImage;

                    var tags = (blogPosts[blogPosts.length-1].tag1).split(",");
                    document.getElementById('suggestion-clicks:0').style.height = "min-content";

                }else if(i == 1){
                    cloneId = "suggestion-clicks:" + i;
                    clone.id = cloneId;

                    clone.querySelector("span#suggestion-clicks-author").textContent = blogPosts[blogPosts.length - i-1].author;
                    clone.querySelector("span#suggestion-clicks-date").textContent = blogPosts[blogPosts.length - i-1].postDate;
                    clone.querySelector("span#suggestion-clicks-title").textContent = blogPosts[blogPosts.length - i-1].title;
                    clone.querySelector("span#suggestion-clicks-description").textContent = blogPosts[blogPosts.length - i-1].description.slice(0, 100)+".....";
                    clone.querySelector("img#suggestion-clicks-image").src = blogPosts[blogPosts.length - i-1].coverImage;

                    sugesttions[0].appendChild(clone);
                    document.getElementById(cloneId).style.height = "min-content";
                }
                else if(i == 2){
                    cloneId = "suggestion-clicks:" + i;
                    clone.id = cloneId;

                    clone.querySelector("span#suggestion-clicks-author").textContent = blogPosts[blogPosts.length - i-1].author;
                    clone.querySelector("span#suggestion-clicks-date").textContent = blogPosts[blogPosts.length - i-1].postDate;
                    clone.querySelector("span#suggestion-clicks-title").textContent = blogPosts[blogPosts.length - i-1].title;
                    clone.querySelector("span#suggestion-clicks-description").textContent = blogPosts[blogPosts.length - i-1].description.slice(0, 100)+".....";
                    clone.querySelector("img#suggestion-clicks-image").src = blogPosts[blogPosts.length - i-1].coverImage;

                    sugesttions[0].appendChild(clone);
                    document.getElementById(cloneId).style.height = "min-content";
                }
            }
            });
        document.querySelector("#articleSubmitBtn").addEventListener("click", function(event){
            event.preventDefault();
            var innerDocument = document.getElementById('htmeditor_ifr').contentWindow.document
            
            var inputJson = {
                title: document.getElementById("inputtitle").value,
                author: document.getElementById("inputFirstName").value + document.getElementById("inputLastName").value,
                description: document.getElementById("descriptionTextArea").value,
                tag1: document.getElementById("inputTag1").value,
                canItem: document.getElementById("inputCanItem").value,
                coverImage: document.getElementById("inputCoverImage").value,
                html: innerDocument.getElementById('tinymce').innerHTML,
                aproved: true,
            };
            firebase.firestore().collection("blog-posts").doc((document.getElementById("inputtitle").value.split(" ").join("-"))).set(inputJson)
        });
        function reply_click(id){

            checkArticleClickedCookie(document.getElementById(id).childNodes[1].childNodes[7].innerHTML.trim().split(" ").join("-"));
            
        }

    </script>
    </body>
</html>